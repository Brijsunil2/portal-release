import{r as g,u as B,j as e,B as b,c as G,a as C,b as k,d as q,C as N,R as m,e as u,S as P,s as F,f as U,g as V}from"./index--4XkYjpe.js";import{c as L,a as p,F as s,f as I}from"./index.esm-y_tTTqxo.js";import{B as R}from"./ButtonGroup-AyM6LQ6N.js";const A=()=>{},E=g.forwardRef(({bsPrefix:i,name:r,className:l,checked:h,type:w,onChange:v,value:f,disabled:x,id:j,inputRef:d,...c},o)=>(i=B(i,"btn-check"),e.jsxs(e.Fragment,{children:[e.jsx("input",{className:i,name:r,type:w,value:f,ref:d,autoComplete:"off",checked:!!h,disabled:!!x,onChange:v||A,id:j}),e.jsx(b,{...c,ref:o,className:G(l,x&&"disabled"),type:void 0,role:void 0,as:"label",htmlFor:j})]})));E.displayName="ToggleButton";const S=E,H=()=>{const[i,r]=g.useState(!0),{Formik:l}=I,h=L().shape({email:p().required().email(),password:p().required()}),w=C(),v=k(),[f,{isLoading:x}]=q(),j=async d=>{var c,o;r(!0);try{const a=await f(d).unwrap();v(F({...a})),w("/")}catch(a){if(a.status===401)switch(a.data.message){case"Invalid email or password":r(!1);break;default:console.log(((c=a==null?void 0:a.data)==null?void 0:c.message)||a.error)}else console.log(((o=a==null?void 0:a.data)==null?void 0:o.message)||a.error)}};return e.jsxs(N,{className:"authlogin-container",children:[e.jsx("h2",{className:"auth-h2",children:"Login to Portal!"}),e.jsx(l,{validationSchema:h,onSubmit:d=>j(d),initialValues:{email:"",password:""},children:({handleSubmit:d,handleChange:c,values:o,touched:a,errors:t})=>e.jsxs(s,{noValidate:!0,onSubmit:d,children:[e.jsx(m,{className:"mb-3",children:e.jsxs(s.Group,{as:u,children:[e.jsx(s.Control,{type:"email",placeholder:"Email",name:"email",value:o.email,onChange:c,isInvalid:(t.email||!i)&&a.email}),e.jsx(s.Control.Feedback,{type:"invalid",children:i?"Please provide a valid email":""})]})}),e.jsx(m,{className:"mb-3",children:e.jsxs(s.Group,{as:u,children:[e.jsx(s.Control,{type:"password",placeholder:"Password",name:"password",value:o.password,onChange:c,isInvalid:(t.password||!i)&&a.password}),e.jsx(s.Control.Feedback,{type:"invalid",children:i?"Please provide a password":"Invalid email or password"})]})}),e.jsx(b,{type:"submit",children:x?e.jsx(P,{animation:"border",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}):"Login"})]})})]})},T=()=>{const[i,r]=g.useState(!0),[l,h]=g.useState(!0),{Formik:w}=I,v=L().shape({name:p().required(),username:p().required().min(5),email:p().required().email(),password:p().required(),confirmPassword:p().required()}),f=C(),x=k(),[j,{isLoading:d}]=U(),c=async o=>{var a,t;r(!0),h(!0);try{const n=await j(o).unwrap();x(F({...n})),f("/")}catch(n){if(n.status===400)switch(n.data.message){case"Email already exists":h(!1);break;case"Username already exists":r(!1);break;default:console.log(((a=n==null?void 0:n.data)==null?void 0:a.message)||n.error)}else console.log(((t=n==null?void 0:n.data)==null?void 0:t.message)||n.error)}};return e.jsxs(N,{className:"authsignup-container",children:[e.jsx("h2",{className:"auth-h2",children:"Sign-up to get Started!"}),e.jsx(w,{validationSchema:v,onSubmit:o=>c(o),initialValues:{name:"",username:"",email:"",password:"",confirmPassword:""},children:({handleSubmit:o,handleChange:a,values:t,touched:n,errors:y})=>e.jsxs(s,{noValidate:!0,onSubmit:o,children:[e.jsx(m,{className:"mb-3",children:e.jsxs(s.Group,{as:u,children:[e.jsx(s.Control,{type:"text",placeholder:"Name",name:"name",value:t.name,onChange:a,isInvalid:y.name&&n.name}),e.jsx(s.Control.Feedback,{type:"invalid",children:"Please provide your name"})]})}),e.jsx(m,{className:"mb-3",children:e.jsxs(s.Group,{as:u,children:[e.jsx(s.Control,{type:"text",placeholder:"Username",name:"username",minLength:"5",maxLength:"20",value:t.username,onChange:a,isInvalid:(y.username||!i)&&n.username}),e.jsx(s.Control.Feedback,{type:"invalid",children:i?"Username must be a minimum of 5 characters long":"Username already exists"})]})}),e.jsx(m,{className:"mb-3",children:e.jsxs(s.Group,{as:u,children:[e.jsx(s.Control,{type:"email",placeholder:"Email",name:"email",value:t.email,onChange:a,isInvalid:(y.email||!l)&&n.email}),e.jsx(s.Control.Feedback,{type:"invalid",children:l?"Please provide a valid email":"Email already exists"})]})}),e.jsx(m,{className:"mb-3",children:e.jsxs(s.Group,{as:u,children:[e.jsx(s.Control,{type:"password",placeholder:"Password",name:"password",pattern:"(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}",value:t.password,onChange:a,isInvalid:y.password&&n.password}),e.jsx(s.Control.Feedback,{type:"invalid",children:"Password must have at least one lowercase, one uppercase, a number and at least 8 characters long"})]})}),e.jsx(m,{className:"mb-3",children:e.jsxs(s.Group,{as:u,children:[e.jsx(s.Control,{type:"password",placeholder:"Retype Password",value:t.confirmPassword,name:"confirmPassword",onChange:a,isInvalid:t.password!==t.confirmPassword&&n.confirmPassword}),e.jsx(s.Control.Feedback,{type:"invalid",children:"Passwords must match"})]})}),e.jsx(b,{type:"submit",children:d?e.jsx(P,{animation:"border",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}):"Sign-up"})]})})]})},$=({setUser:i})=>{const[r,l]=g.useState(!0);return e.jsxs("div",{className:"authsection-container",children:[e.jsxs(R,{children:[e.jsx(S,{type:"radio",checked:r,onClick:()=>l(!0),children:"Login"}),e.jsx(S,{type:"radio",checked:!r,onClick:()=>l(!1),children:"Sign-up"})]}),e.jsx(N,{children:r?e.jsx(H,{}):e.jsx(T,{})})]})},Z=()=>{const{userInfo:i}=V(l=>l.auth),r=C();return g.useEffect(()=>{i&&r("/home")},[i,r]),e.jsx("div",{className:"homescreen-container",children:e.jsx("div",{className:"primary-container",children:e.jsx($,{})})})};export{Z as default};
