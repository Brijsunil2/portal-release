import{r as m,b as N,g as U,k,j as e,C as w,R as o,e as l,B as F,S as I,s as L}from"./index-rkpLTI3h.js";import{c as E,a as t,F as s,f as G}from"./index.esm-PlgBFHma.js";import{M as u}from"./Modal-OPkUt1lK.js";const M=()=>{const[p,x]=m.useState(!0),[h,j]=m.useState(!0),[f,b]=m.useState(!1),{Formik:y}=G,v=E().shape({name:t().required(),username:t().required().min(5),email:t().required().email(),password:t(),confirmPassword:t()}),g=N(),{userInfo:d}=U(i=>i.auth),[C,{isLoading:S}]=k(),P=async i=>{var n,r;x(!0),j(!0);try{const a=await C(i).unwrap();g(L({...a})),b(!0)}catch(a){if(a.status===400)switch(a.data.message){case"Email already exists":j(!1);break;case"Username already exists":x(!1);break;default:console.log(((n=a==null?void 0:a.data)==null?void 0:n.message)||a.error)}else console.log(((r=a==null?void 0:a.data)==null?void 0:r.message)||a.error)}};return e.jsxs(w,{className:"accountinfo-container",children:[e.jsx("h3",{children:"Account Information"}),e.jsx(y,{validationSchema:v,onSubmit:i=>P(i),initialValues:{name:d.name,username:d.username,email:d.email,password:"",confirmPassword:""},children:({handleSubmit:i,handleChange:n,values:r,touched:a,errors:c})=>e.jsxs(s,{noValidate:!0,onSubmit:i,children:[e.jsx(o,{className:"mb-3",children:e.jsxs(s.Group,{as:l,children:[e.jsx(s.Label,{children:"Name"}),e.jsx(s.Control,{type:"text",placeholder:"Name",name:"name",value:r.name,onChange:n,isInvalid:c.name&&a.name}),e.jsx(s.Control.Feedback,{type:"invalid",children:"Please provide your name"})]})}),e.jsx(o,{className:"mb-3",children:e.jsxs(s.Group,{as:l,children:[e.jsx(s.Label,{children:"Username"}),e.jsx(s.Control,{type:"text",placeholder:"Username",name:"username",minLength:"5",maxLength:"20",value:r.username,onChange:n,isInvalid:(c.username||!p)&&a.username}),e.jsx(s.Control.Feedback,{type:"invalid",children:p?"Username must be a minimum of 5 characters long":"Username already exists"})]})}),e.jsx(o,{className:"mb-3",children:e.jsxs(s.Group,{as:l,children:[e.jsx(s.Label,{children:"Email"}),e.jsx(s.Control,{type:"email",placeholder:"Email",name:"email",value:r.email,onChange:n,isInvalid:(c.email||!h)&&a.email}),e.jsx(s.Control.Feedback,{type:"invalid",children:h?"Please provide a valid email":"Email already exists"})]})}),e.jsx(o,{className:"mb-3",children:e.jsxs(s.Group,{as:l,children:[e.jsx(s.Label,{children:"Password"}),e.jsx(s.Control,{type:"password",placeholder:"Password",name:"password",pattern:"(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}",value:r.password,onChange:n,isInvalid:c.password&&a.password}),e.jsx(s.Control.Feedback,{type:"invalid",children:"Password must have at least one lowercase, one uppercase, a number and at least 8 characters long"})]})}),e.jsx(o,{className:"mb-3",children:e.jsxs(s.Group,{as:l,children:[e.jsx(s.Label,{children:"Retype Password"}),e.jsx(s.Control,{type:"password",placeholder:"Retype Password",value:r.confirmPassword,name:"confirmPassword",onChange:n,isInvalid:r.password!==r.confirmPassword&&a.confirmPassword}),e.jsx(s.Control.Feedback,{type:"invalid",children:"Passwords must match"})]})}),e.jsxs(u,{size:"sm",show:f,onHide:()=>b(!1),"aria-labelledby":"success-modal",centered:!0,children:[e.jsx(u.Header,{closeButton:!0,children:"Success!"}),e.jsx(u.Body,{style:{color:"green"},children:"Account Information Updated"})]}),e.jsx(F,{type:"submit",children:S?e.jsx(I,{animation:"border",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}):"Update"})]})})]})},V=()=>e.jsx("div",{className:"settingscreen-container",children:e.jsx("div",{className:"primary-container",children:e.jsxs(w,{children:[e.jsx("h2",{children:"Settings"}),e.jsx(M,{})]})})});export{V as default};
